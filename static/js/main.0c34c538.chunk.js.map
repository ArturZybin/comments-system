{"version":3,"sources":["img/heart.svg","img/filled-heart.svg","img/avatar.svg","img/comments.svg","redux/authUserReducer.ts","redux/responsesReducer.ts","redux/types.ts","redux/commentsReducer.ts","redux/rootReducer.ts","redux/actions.ts","firebase/FirebaseConstructor.ts","firebase/FirebaseContext.ts","constants/routes.ts","components/NavBar.tsx","components/pages/comments/CommentForm.tsx","components/pages/comments/Loading.tsx","components/pages/comments/responses/ResponseForm.tsx","components/pages/comments/responses/Response.tsx","components/pages/comments/responses/Responses.tsx","components/pages/comments/responses/useResponsesLoading.tsx","components/pages/comments/Comment.tsx","components/pages/comments/CommentsPage.tsx","components/pages/comments/useCommentsLoading.tsx","components/pages/validate.ts","components/pages/auth/SignInPage.tsx","firebase/withAuthorisation.tsx","components/pages/auth/SignUpPage.tsx","components/pages/auth/PasswordResetPage.tsx","components/pages/account/SignOutButton.tsx","components/pages/account/PasswordUpdateForm.tsx","components/pages/account/AccountPage.tsx","App.tsx","firebase/useAuthentication.tsx","index.tsx"],"names":["module","exports","INITIAL_STATE","authUser","username","responsesReducer","state","action","responses","type","payload","isResponsesOver","response","responseIndex","likesCount","isLiked","comments","isCommentsOver","rootReducer","combineReducers","authUserStore","commentsStore","comment","index","commentIndex","setCommentLikes","setIsCommentLiked","setResponseLikes","setIsResponseLiked","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","Firebase","auth","db","parentURL","doCreateUserWithEmailAndPassword","email","password","createUserWithEmailAndPassword","doSignInWithEmailAndPassword","signInWithEmailAndPassword","doSignOut","signOut","doPasswordReset","sendPasswordResetEmail","doPasswordUpdate","currentUser","updatePassword","userRef","uid","collection","doc","doCreateComment","commentsRef","add","commentLikesRef","commentRef","doCreateResponse","responsesRef","responseLikesRef","responseRef","app","initializeApp","this","firestore","queries","window","location","search","substring","split","pair","getParentURL","FirebaseContext","React","createContext","SIGN_IN","NavBar","useSelector","store","isCurrentPageComments","useLocation","pathname","commentsClassname","accountClassname","className","to","src","commentsSrc","alt","ROUTES","avatarSrc","CommentForm","history","useHistory","dispatch","useDispatch","firebase","useContext","useState","text","setText","formClassname","onSubmit","event","preventDefault","preparedText","replace","authorUsername","authorUID","created","Timestamp","fromMillis","Date","now","then","docRef","createComment","catch","error","console","push","value","onChange","target","maxLength","placeholder","disabled","Loading","ResponseForm","closeForm","createResponse","Response","useEffect","get","querySnapshot","docs","length","filter","data","loadResponseLikes","heartSrc","filledHeart","heart","map","par","key","moment","unix","seconds","fromNow","onClick","undefined","authUserLikeRef","delete","set","Responses","shouldShowForm","orderBy","limit","query","setQuery","loading","setLoading","loadResponses","documentSnapshots","setResponsesOver","lastVisible","startAfter","loadedResponses","ref","addResponses","isLoading","useResponsesLoading","responsesTemplate","nanoseconds","showLoadButton","Comment","shouldShowResponseForm","setShouldShowResponseForm","loadCommentLikes","CommentsPage","loadComments","loadedComments","addComments","useCommentsLoading","commentsTemplate","checkFormInvalid","form","Object","entries","field","emailValidator","validate","passwordOne","getInputClassname","condition","SignInPage","setEmail","setPassword","setError","emailClassName","passwordClassName","isFormInvalid","name","message","SignUpPage","setUsername","setPasswordOne","passwordTwo","setPasswordTwo","usernameClassName","passwordOneClassName","passwordTwoClassName","user","PasswordResetPage","SignOutButton","PasswordUpdateForm","AccountPage","Component","props","isConfirm","App","onAuthStateChanged","exists","setAuthUserUsername","useAuthentication","basename","exact","path","component","persistConfig","blacklist","storage","persistedReducer","persistReducer","createStore","composeWithDevTools","persistor","persistStore","render","StrictMode","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.0c34c538.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/heart.77100eea.svg\";","module.exports = __webpack_public_path__ + \"static/media/filled-heart.f2610513.svg\";","module.exports = __webpack_public_path__ + \"static/media/avatar.511718fc.svg\";","module.exports = __webpack_public_path__ + \"static/media/comments.d68b6143.svg\";","import { CHANGE_AUTH_USER, SET_AUTH_USER_USERNAME } from \"./types\";\nimport { TAuthUser, IStore } from \"../constants/typescript-types\";\n\n\ninterface IAction {\n   type: string,\n   payload: TAuthUser | string\n}\n\ntype TState = IStore['authUserStore']\n\n\nconst INITIAL_STATE = {\n   authUser: null,\n   username: null\n}\n\nexport function authUserReducer (state: TState = INITIAL_STATE, action: IAction) {\n   switch(action.type) {\n      case CHANGE_AUTH_USER:\n         return { authUser: action.payload, username: null } as TState\n      case SET_AUTH_USER_USERNAME:\n         return { ...state, username: action.payload } as TState\n      default:\n         return state\n   }\n}","import { IComment, IResponse } from \"../constants/typescript-types\"\nimport { ADD_RESPONSES, SET_RESPONSES_OVER, SET_RESPONSE_LIKES, SET_IS_RESPONSE_LIKED, CREATE_RESPONSE } from \"./types\"\n\n\ninterface IAction {\n   type: string,\n   payload: any\n}\n\n\nexport function responsesReducer(state: IComment, action: IAction): IComment {\n   let responses\n\n   switch (action.type) {\n      case ADD_RESPONSES:\n         return { ...state, responses: [...state.responses as IResponse[], ...action.payload.responses] }\n\n      case SET_RESPONSES_OVER:\n         return { ...state, isResponsesOver: true }\n\n      case CREATE_RESPONSE:\n         responses = [...state.responses as IResponse[], action.payload.response]\n         return { ...state, responses }\n\n      case SET_RESPONSE_LIKES:\n         responses = state.responses as IResponse[]\n         responses[action.payload.responseIndex].likesCount = action.payload.likesCount\n         return { ...state, responses }\n\n      case SET_IS_RESPONSE_LIKED:\n         responses = state.responses as IResponse[]\n         responses[action.payload.responseIndex].isLiked = action.payload.isLiked\n         return { ...state, responses }\n\n      default:\n         return state\n   }\n}","// authUser\nexport const CHANGE_AUTH_USER = 'CHANGE_AUTH_USER'\nexport const SET_AUTH_USER_USERNAME = 'SET_AUTH_USER_USERNAME'\n// comments\nexport const ADD_COMMENTS = 'ADD_COMMENTS'\nexport const SET_COMMENTS_OVER = 'SET_COMMENTS_OVER'\nexport const CREATE_COMMENT = 'CREATE_COMMENT'\nexport const SET_COMMENT_LIKES = 'SET_COMMENT_LIKES'\nexport const SET_IS_COMMENT_LIKED = 'SET_IS_COMMENT_LIKED'\n// responses\nexport const ADD_RESPONSES = 'ADD_RESPONSES'\nexport const SET_RESPONSES_OVER = 'SET_RESPONSES_OVER'\nexport const CREATE_RESPONSE = 'CREATE_RESPONSE'\nexport const SET_RESPONSE_LIKES = 'SET_RESPONS_LIKES'\nexport const SET_IS_RESPONSE_LIKED = 'SET_IS_RESPONS_LIKED'","import { IComment, IStore } from \"../constants/typescript-types\";\nimport { ADD_COMMENTS, SET_COMMENTS_OVER, CREATE_COMMENT, SET_COMMENT_LIKES, SET_IS_COMMENT_LIKED, ADD_RESPONSES, SET_RESPONSES_OVER, SET_RESPONSE_LIKES, SET_IS_RESPONSE_LIKED, CREATE_RESPONSE } from \"./types\";\nimport { responsesReducer } from \"./responsesReducer\";\n\n\ninterface IAction {\n   type: string,\n   payload: any\n}\n\ntype TState = IStore['commentsStore']\n\nconst INITIAL_STATE: TState = {\n   comments: [],\n   isCommentsOver: false\n}\n\nexport function commentsReducer(state: TState = INITIAL_STATE, action: IAction) {\n   let comments: IComment[]\n   let comment: IComment\n\n   switch (action.type) {\n      case ADD_COMMENTS:\n         comments = [...state.comments, ...action.payload]\n         return { ...state, comments }\n\n      case SET_COMMENTS_OVER:\n         return { ...state, isCommentsOver: true }\n\n      case CREATE_COMMENT:\n         comments = [action.payload, ...state.comments]\n         return { ...state, comments }\n      \n      case SET_COMMENT_LIKES:\n         comments = state.comments\n         comments[action.payload.index].likesCount = action.payload.likesCount\n         return { ...state, comments }\n\n      case SET_IS_COMMENT_LIKED:\n         comments = state.comments\n         comments[action.payload.index].isLiked = action.payload.isLiked\n         return { ...state, comments }\n      \n      case ADD_RESPONSES:\n      case SET_RESPONSES_OVER:\n      case CREATE_RESPONSE:\n      case SET_RESPONSE_LIKES:\n      case SET_IS_RESPONSE_LIKED:\n         comment = state.comments[action.payload.commentIndex]\n         comment = responsesReducer(comment, action)\n         comments = state.comments\n         comments[action.payload.commentIndex] = comment\n         return {...state, comments}\n\n      default:\n         return state\n   }\n}","import { combineReducers } from \"redux\";\nimport { authUserReducer } from \"./authUserReducer\";\nimport { commentsReducer } from \"./commentsReducer\";\n\nexport const rootReducer = combineReducers({\n   authUserStore: authUserReducer,\n   commentsStore: commentsReducer\n})","import { CHANGE_AUTH_USER, SET_AUTH_USER_USERNAME, ADD_COMMENTS, SET_COMMENTS_OVER, CREATE_COMMENT, SET_COMMENT_LIKES, SET_IS_COMMENT_LIKED, ADD_RESPONSES, SET_RESPONSES_OVER, CREATE_RESPONSE, SET_RESPONSE_LIKES, SET_IS_RESPONSE_LIKED } from \"./types\";\nimport { TAuthUser, IComment, IResponse } from \"../constants/typescript-types\";\n\n// authUser -----------------------------------------------------------------------\nexport const changeAuthUser = (user: TAuthUser) => ({\n   type: CHANGE_AUTH_USER,\n   payload: user\n})\n\nexport const setAuthUserUsername = (username: string) => ({\n   type: SET_AUTH_USER_USERNAME,\n   payload: username\n})\n\n// comments -----------------------------------------------------------------------\nexport const addComments = (comments: IComment[]) => ({\n   type: ADD_COMMENTS,\n   payload: comments\n})\n\nexport const setCommentsOver = () => ({ type: SET_COMMENTS_OVER })\n\nexport const createComment = (comment: IComment) => ({\n   type: CREATE_COMMENT,\n   payload: comment\n})\n\nexport const setCommentLikes = (commentIndex: number, likesCount: number) => ({\n   type: SET_COMMENT_LIKES,\n   payload: { index: commentIndex, likesCount }\n})\n\nexport const setIsCommentLiked = (commentIndex: number, isLiked: boolean) => ({\n   type: SET_IS_COMMENT_LIKED,\n   payload: { index: commentIndex, isLiked }\n})\n\n// responses -----------------------------------------------------------------------\nexport const addResponses = (commentIndex: number, responses: IResponse[]) => ({\n   type: ADD_RESPONSES,\n   payload: { commentIndex, responses }\n})\n\nexport const setResponsesOver = (commentIndex: number) => ({\n   type: SET_RESPONSES_OVER,\n   payload: { commentIndex }\n})\n\nexport const createResponse = (commentIndex: number, response: IResponse) => ({\n   type: CREATE_RESPONSE,\n   payload: { commentIndex, response }\n})\n\nexport const setResponseLikes = (commentIndex: number, responseIndex: number, likesCount: number) => ({\n   type: SET_RESPONSE_LIKES,\n   payload: { commentIndex, responseIndex, likesCount }\n})\n\nexport const setIsResponseLiked = (commentIndex: number, responseIndex: number, isLiked: boolean) => ({\n   type: SET_IS_RESPONSE_LIKED,\n   payload: { commentIndex, responseIndex, isLiked }\n})","import app from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/firestore'\nimport { IComment, IResponse } from '../constants/typescript-types';\n\n\nconst config = {\n   apiKey: \"AIzaSyDpt6WXqe7-GrSdSZxe1w1jD_h9XQIQWYA\",\n   authDomain: \"comments-system-6e56a.firebaseapp.com\",\n   databaseURL: \"https://comments-system-6e56a.firebaseio.com\",\n   projectId: \"comments-system-6e56a\",\n   storageBucket: \"comments-system-6e56a.appspot.com\",\n   messagingSenderId: \"463788584226\",\n   appId: \"1:463788584226:web:d0787997fe53b69d8d497b\",\n   measurementId: \"G-LMGZ5VEP27\"\n};\n\n\nexport class FirebaseConstructor {\n   auth: app.auth.Auth\n   db: app.firestore.Firestore\n   parentURL: string\n\n   constructor() {\n      app.initializeApp(config)\n      this.auth = app.auth()\n      this.db = app.firestore()\n      this.parentURL = getParentURL()\n   }\n\n\n   // *** Auth API ***\n   doCreateUserWithEmailAndPassword = (email: string, password: string) => this.auth.createUserWithEmailAndPassword(email, password)\n\n   doSignInWithEmailAndPassword = (email: string, password: string) => this.auth.signInWithEmailAndPassword(email, password)\n\n   doSignOut = () => this.auth.signOut()\n\n   doPasswordReset = (email: string) => this.auth.sendPasswordResetEmail(email)\n\n   doPasswordUpdate = (password: string) => this.auth.currentUser?.updatePassword(password)\n\n\n   // *** Firestore API ***\n   userRef = (uid: string) => this.db.collection('users').doc(uid)\n\n   // comment\n   doCreateComment = (comment: IComment) => this.commentsRef().add(comment)\n\n   commentsRef = () => this.db.collection('pages').doc(this.parentURL).collection('comments')\n\n   commentLikesRef = (commentRef: app.firestore.DocumentReference) => commentRef.collection('likes')\n   \n   // response\n   doCreateResponse = (commentRef: app.firestore.DocumentReference, response: IResponse) => this.responsesRef(commentRef).add(response)\n\n   responsesRef = (commentRef: app.firestore.DocumentReference) => commentRef.collection('responses')\n\n   responseLikesRef = (responseRef: app.firestore.DocumentReference) => responseRef.collection('likes')\n}\n\n\nfunction getParentURL(): string {\n   const queryString = window.location.search.substring(1)\n   const queries = queryString.split(\"&\")\n\n   for (let query of queries) {\n      const pair = query.split('=')\n      if (pair[0] === 'parentURL') return pair[1]\n   }\n\n   return 'default'\n}","import React from 'react'\nimport { FirebaseConstructor } from './FirebaseConstructor'\n\nexport const Firebase = new FirebaseConstructor()\nexport const FirebaseContext = React.createContext<FirebaseConstructor>(Firebase)","export const COMMENTS = '/comments'\nexport const SIGN_IN = '/signin'\nexport const SIGN_UP = '/signup'\nexport const ACCOUNT = '/account'\nexport const PASSWORD_RESET = '/password-reset'","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Link, useLocation } from 'react-router-dom'\n\nimport * as ROUTES from '../constants/routes'\nimport { IStore } from '../constants/typescript-types'\n\nimport avatarSrc from '../img/avatar.svg'\nimport commentsSrc from '../img/comments.svg'\n\n\nexport const NavBar: React.FC = () => {\n   let { authUser, username } = useSelector((store: IStore) => store.authUserStore)\n   if (!username) username = 'Loading...'\n\n   const isCurrentPageComments = useLocation().pathname === ROUTES.COMMENTS\n   const commentsClassname = (isCurrentPageComments) ? 'navbar__button navbar__button_pressed' : 'navbar__button'\n   const accountClassname = (isCurrentPageComments) ? 'navbar__button' : 'navbar__button navbar__button_pressed'\n\n\n   return (\n      <nav className=\"navbar\">\n         <Link to={ROUTES.COMMENTS} className={commentsClassname}>\n            <img className=\"navbar__img\" src={commentsSrc} alt=\"Comments\" />\n         </Link>\n\n         {authUser ?\n            <Link to={ROUTES.ACCOUNT} className={accountClassname}>{username}</Link>\n            :\n            <Link to={ROUTES.SIGN_IN} className={accountClassname}>\n               <img className=\"navbar__img\" src={avatarSrc} alt=\"Sign In\" />\n            </Link>\n         }\n      </nav>\n   )\n}","import React, { useState, useContext } from 'react'\nimport { useHistory, Link } from 'react-router-dom'\nimport { useSelector, useDispatch } from 'react-redux'\nimport app from 'firebase/app'\n\nimport { createComment } from '../../../redux/actions'\nimport * as ROUTES from '../../../constants/routes'\nimport { FirebaseContext } from '../../../firebase/FirebaseContext'\nimport { IStore, IComment } from '../../../constants/typescript-types'\n\n\nexport const CommentForm: React.FC = () => {\n   const history = useHistory()\n   const dispatch = useDispatch()\n   const firebase = useContext(FirebaseContext)\n\n   const { authUser, username } = useSelector((store: IStore) => store.authUserStore)\n   const [text, setText] = useState<string>('')\n\n\n   function handleSubmit(event: React.FormEvent) {\n      event.preventDefault()\n\n      if (!text) return\n      if (!username || !authUser) {\n         if (!authUser) history.push(ROUTES.SIGN_IN)\n         return\n      }\n\n      const preparedText = text.replace('\\n', '__n')\n\n      const comment: IComment = {\n         authorUsername: username,\n         authorUID: authUser?.uid,\n         text: preparedText,\n         created: app.firestore.Timestamp.fromMillis(Date.now())\n      }\n\n      firebase\n         .doCreateComment(comment)\n         .then((docRef) => dispatch(createComment({ ...comment, docRef, responses: [], isResponsesOver: false })))\n         .then(() => setText(''))\n         .catch((error) => console.error(\"Error adding comment: \", error))\n   }\n\n\n   const formClassname = text ? 'message-form' : 'message-form message-form_closed'\n\n   return (\n      authUser\n         ?\n         <form className={formClassname} onSubmit={handleSubmit}>\n            <textarea\n               className=\"message-form__text\"\n               value={text}\n               onChange={(event) => setText(event.target.value)}\n               maxLength={1000}\n               placeholder=\"Write a comment...\"\n            >\n            </textarea>\n\n            <button className=\"message-form__submit\" type=\"submit\" disabled={!text}>Write as {username ? username : 'you'}</button>\n         </form>\n         :\n         <div className=\"message-form-sign-in\"><Link to={ROUTES.SIGN_IN}>Sign in</Link> to write a comment</div>\n   )\n}","\nimport React from 'react'\n\nexport const Loading: React.FC = () => (\n   <div className=\"loading\">  <div></div><div></div><div></div><div></div>  </div>\n)","import React, { useState, useContext } from 'react'\nimport { useHistory, Link } from 'react-router-dom'\nimport { useSelector, useDispatch } from 'react-redux'\nimport app from 'firebase/app'\n\nimport { createResponse } from '../../../../redux/actions'\nimport * as ROUTES from '../../../../constants/routes'\nimport { FirebaseContext } from '../../../../firebase/FirebaseContext'\nimport { IStore, IResponse } from '../../../../constants/typescript-types'\n\n\ntype TProps = { commentRef: app.firestore.DocumentReference, commentIndex: number, closeForm: () => void }\n\nexport const ResponseForm: React.FC<TProps> = ({ commentRef, commentIndex, closeForm }) => {\n   const history = useHistory()\n   const dispatch = useDispatch()\n   const firebase = useContext(FirebaseContext)\n\n   const { authUser, username } = useSelector((store: IStore) => store.authUserStore)\n   const [text, setText] = useState<string>('')\n\n\n   function handleSubmit(event: React.FormEvent) {\n      event.preventDefault()\n\n      if (!text) return\n      if (!username || !authUser) {\n         if (!authUser) history.push(ROUTES.SIGN_IN)\n         return\n      }\n\n      const preparedText = text.replace('\\n', '__n')\n      const response: IResponse = {\n         authorUsername: username,\n         authorUID: authUser?.uid,\n         text: preparedText,\n         created: app.firestore.Timestamp.fromMillis(Date.now())\n      }\n\n      firebase\n         .doCreateResponse(commentRef, response)\n         .then((docRef) => dispatch(createResponse(commentIndex, { ...response, docRef })))\n         .then(() => closeForm())\n         .catch((error) => console.error(\"Error adding response: \", error))\n   }\n\n\n   return (\n      authUser\n         ?\n         <form className=\"message-form\" onSubmit={handleSubmit}>\n            <textarea\n               className=\"message-form__text\"\n               value={text}\n               onChange={(event) => setText(event.target.value)}\n               maxLength={1000}\n               placeholder=\"Write a response...\"\n            >\n            </textarea>\n\n            <button className=\"message-form__submit\" type=\"submit\" disabled={!text}>Reply as {username ? username : 'you'}</button>\n         </form>\n         :\n         <div className=\"message-form-sign-in\"><Link to={ROUTES.SIGN_IN}>Sign in</Link> to write a response</div>\n   )\n}","import React, { useContext, useEffect } from 'react'\nimport app from 'firebase/app'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport moment from 'moment'\n\nimport { FirebaseContext } from '../../../../firebase/FirebaseContext'\nimport { IResponse, IStore } from '../../../../constants/typescript-types'\nimport * as ROUTES from '../../../../constants/routes'\n\nimport heart from '../../../../img/heart.svg'\nimport filledHeart from '../../../../img/filled-heart.svg'\nimport { setResponseLikes, setIsResponseLiked } from '../../../../redux/actions'\n\n\ntype TProps = { response: IResponse, responseIndex: number, commentIndex: number }\n\nexport const Response: React.FC<TProps> = ({ response, responseIndex, commentIndex }) => {\n   const history = useHistory()\n   const dispatch = useDispatch()\n   const firebase = useContext(FirebaseContext)\n   const authUser = useSelector((store: IStore) => store.authUserStore.authUser)\n\n\n   useEffect(() => {\n      loadResponseLikes()\n      // eslint-disable-next-line\n   }, [authUser])\n\n\n   function loadResponseLikes() {\n      const responseRef = response.docRef as app.firestore.DocumentReference\n\n      firebase.responseLikesRef(responseRef).get()\n         .then((querySnapshot) => {\n            const likesCount = querySnapshot.docs.length\n            const isLiked = querySnapshot.docs.filter((doc) => doc.data().uid === authUser?.uid).length !== 0\n            dispatch( setResponseLikes(commentIndex, responseIndex, likesCount) )\n            dispatch( setIsResponseLiked(commentIndex, responseIndex, isLiked) )\n         })\n   }\n\n\n   function handleLike() {\n      if (!authUser) {\n         history.push(ROUTES.SIGN_IN)\n         return\n      }\n      if (response.likesCount === undefined || response.isLiked === undefined) {\n         return\n      }\n\n      const authUserLikeRef = firebase.responseLikesRef(response.docRef as app.firestore.DocumentReference).doc(authUser.uid)\n\n      if (response.isLiked) {\n         dispatch( setResponseLikes(commentIndex, responseIndex, response.likesCount - 1) )\n         authUserLikeRef.delete()\n      } else {\n         dispatch( setResponseLikes(commentIndex, responseIndex, response.likesCount + 1) )\n         authUserLikeRef.set({ uid: authUser.uid })\n      }\n\n      dispatch( setIsResponseLiked(commentIndex, responseIndex, !response.isLiked) )\n   }\n\n\n   const heartSrc = response.isLiked ? filledHeart : heart\n   const preparedText = response.text.split('__n').map((par, index) => <p key={index}>{par}</p>)\n\n   return (\n      <div className=\"message\">\n         <div className=\"message__author\">{response.authorUsername}</div>\n         <div className=\"message__created\">{moment.unix(response.created.seconds).fromNow()}</div>\n         <div className=\"message__text\">{preparedText}</div>\n         \n         <button className=\"message__like\" onClick={handleLike}>\n            <img src={heartSrc} alt=\"like\"/>\n            <span className=\"message__likes-count\">{response.likesCount}</span>\n         </button>\n      </div>\n   )\n}","import React from 'react'\nimport app from 'firebase/app'\n\nimport { ResponseForm } from './ResponseForm'\nimport { Response } from './Response'\n\nimport { useResponsesLoading } from './useResponsesLoading'\nimport { IComment } from '../../../../constants/typescript-types'\n\n\ntype TProps = { comment: IComment, commentIndex: number, shouldShowForm: boolean, closeForm: () => void }\n\nexport const Responses: React.FC<TProps> = ({ comment, commentIndex, shouldShowForm, closeForm }) => {\n   const { responses, loadResponses, isResponsesOver, isLoading } = useResponsesLoading(comment, commentIndex)\n\n   const responsesTemplate = responses?.map((response, index) => (\n      <Response\n         key={response.created.nanoseconds}\n         responseIndex={index}\n         commentIndex={commentIndex}\n         response={response}\n      />\n   ))\n\n\n   const showLoadButton: boolean = !isResponsesOver && !isLoading\n\n   return (\n      <div className=\"responses\">\n         {shouldShowForm &&\n            <ResponseForm\n               commentRef={comment.docRef as app.firestore.DocumentReference}\n               commentIndex={commentIndex}\n               closeForm={closeForm}\n            />\n         }\n         \n         {responsesTemplate}\n         {showLoadButton && <button onClick={loadResponses}>Load more responses</button>}\n      </div>\n   )\n}","import { useState, useContext, useEffect } from 'react'\nimport { useDispatch } from 'react-redux'\nimport app from 'firebase/app'\n\nimport { IComment, IResponse } from '../../../../constants/typescript-types'\nimport { FirebaseContext } from '../../../../firebase/FirebaseContext'\nimport { setResponsesOver, addResponses } from '../../../../redux/actions'\n\n\nexport function useResponsesLoading(comment: IComment, commentIndex: number) {\n   const dispatch = useDispatch()\n   const {responses, isResponsesOver} = comment\n   \n   const firebase = useContext(FirebaseContext)\n\n   const limit: number = 10\n\n   const responsesRef = firebase.responsesRef(comment.docRef as app.firestore.DocumentReference)\n   const [query, setQuery] = useState(responsesRef.orderBy('created').limit(limit))\n   const [loading, setLoading] = useState<boolean>(false)\n   \n   \n   function loadResponses() {\n      if (loading) return\n      setLoading(true)\n      \n      query.get().then((documentSnapshots) => {\n         if (documentSnapshots.docs.length < limit) {\n            dispatch(setResponsesOver(commentIndex))\n         }\n         if (!documentSnapshots.docs.length) return\n         \n         const lastVisible = documentSnapshots.docs[documentSnapshots.docs.length - 1]\n         setQuery(responsesRef.orderBy('created').limit(limit).startAfter(lastVisible))\n         \n         const loadedResponses = documentSnapshots.docs.map((doc) => ({...doc.data(), docRef: doc.ref} as IResponse))\n         dispatch(addResponses(commentIndex, loadedResponses))\n         \n         setLoading(false)\n      })\n   }\n   \n\n   useEffect(() => {\n      if (!responses?.length) loadResponses()\n      //eslint-disable-next-line\n   }, [])\n\n   return {responses, loadResponses, isResponsesOver, isLoading: loading}\n}","import React, { useContext, useEffect, useState } from 'react'\nimport app from 'firebase/app'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport moment from 'moment'\n\nimport { Responses } from './responses/Responses'\nimport { FirebaseContext } from '../../../firebase/FirebaseContext'\nimport { setCommentLikes, setIsCommentLiked } from '../../../redux/actions'\nimport { IComment, IStore } from '../../../constants/typescript-types'\nimport * as ROUTES from '../../../constants/routes'\n\nimport heart from '../../../img/heart.svg'\nimport filledHeart from '../../../img/filled-heart.svg'\n\n\ntype TProps = { comment: IComment, commentIndex: number }\n\nexport const Comment: React.FC<TProps> = ({ comment, commentIndex }) => {\n   const history = useHistory()\n   const dispatch = useDispatch()\n   const firebase = useContext(FirebaseContext)\n   const authUser = useSelector((store: IStore) => store.authUserStore.authUser)\n\n   const [shouldShowResponseForm, setShouldShowResponseForm] = useState<boolean>(false)\n\n\n   useEffect(() => {\n      loadCommentLikes()\n      //eslint-disable-next-line\n   }, [authUser])\n\n\n   function loadCommentLikes(): void {\n      const commentRef = comment.docRef as app.firestore.DocumentReference\n\n      firebase.commentLikesRef(commentRef).get()\n         .then((querySnapshot) => {\n            const likesCount = querySnapshot.docs.length\n            const isLiked = querySnapshot.docs.filter((doc) => doc.data().uid === authUser?.uid).length !== 0\n            dispatch(setCommentLikes(commentIndex, likesCount))\n            dispatch(setIsCommentLiked(commentIndex, isLiked))\n         })\n   }\n\n\n   function handleLike(): void {\n      if (!authUser) {\n         history.push(ROUTES.SIGN_IN)\n         return\n      }\n      if (comment.likesCount === undefined || comment.isLiked === undefined) {\n         return\n      }\n\n      const authUserLikeRef = firebase.commentLikesRef(comment.docRef as app.firestore.DocumentReference).doc(authUser?.uid)\n\n      if (comment.isLiked) {\n         dispatch(setCommentLikes(commentIndex, comment.likesCount - 1))\n         authUserLikeRef.delete()\n      } else {\n         dispatch(setCommentLikes(commentIndex, comment.likesCount + 1))\n         authUserLikeRef.set({ uid: authUser?.uid })\n      }\n\n      dispatch(setIsCommentLiked(commentIndex, !comment.isLiked))\n   }\n\n\n   function handleReply(): void {\n      if (!authUser) {\n         history.push(ROUTES.SIGN_IN)\n         return\n      }\n      setShouldShowResponseForm(!shouldShowResponseForm)\n   }\n\n   function closeForm(): void {\n      setShouldShowResponseForm(false)\n   }\n\n\n   const heartSrc = comment.isLiked ? filledHeart : heart\n   const preparedText = comment.text.split('__n').map((par, index) => <p key={index}>{par}</p>)\n\n   return (\n      <div className=\"message\">\n         <div className=\"message__author\">{comment.authorUsername}</div>\n         <div className=\"message__created\">{moment.unix(comment.created.seconds).fromNow()}</div>\n         <div className=\"message__text\">{preparedText}</div>\n\n         <button className=\"message__like\" onClick={handleLike}>\n            <img src={heartSrc} alt=\"like\" />\n            <span className=\"message__likes-count\">{comment.likesCount}</span>\n         </button>\n         <button className=\"message__reply\" onClick={handleReply}>Reply</button>\n\n         <Responses\n            comment={comment}\n            commentIndex={commentIndex}\n            shouldShowForm={shouldShowResponseForm}\n            closeForm={closeForm}\n         />\n      </div>\n   )\n}","import React from 'react'\n\nimport { CommentForm } from './CommentForm'\nimport { Loading } from './Loading'\nimport { Comment } from './Comment'\nimport { useCommentsLoading } from './useCommentsLoading'\n\n\nexport const CommentsPage: React.FC = () => {\n   const { comments, loadComments, isCommentsOver, isLoading } = useCommentsLoading()\n\n   const commentsTemplate = comments.map((comment, index) => (\n      <Comment\n         key={comment.created.nanoseconds}\n         commentIndex={index}\n         comment={comment}\n      />\n   ))\n\n\n   const showLoader: boolean = !isCommentsOver && !comments.length\n   const showLoadButton: boolean = !isCommentsOver && !isLoading\n\n   return (\n      showLoader\n         ?\n         <Loading />\n         :\n         <div className=\"comments\">\n            <CommentForm />\n            {commentsTemplate}\n            {showLoadButton && <button onClick={loadComments}>Load more comments</button>}\n         </div >\n   )\n}","import { useState, useContext, useEffect } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n\nimport { IComment, IStore, IResponse } from '../../../constants/typescript-types'\nimport { FirebaseContext } from '../../../firebase/FirebaseContext'\nimport { addComments, setCommentsOver } from '../../../redux/actions'\n\n\nexport function useCommentsLoading() {\n   const dispatch = useDispatch()\n   const {comments, isCommentsOver} = useSelector((store: IStore) => store.commentsStore)\n   \n   const firebase = useContext(FirebaseContext)\n\n   const limit: number = 50\n   const [query, setQuery] = useState(firebase.commentsRef().orderBy('created', \"desc\").limit(limit))\n   const [loading, setLoading] = useState<boolean>(false)\n   \n   \n   function loadComments() {\n      if (loading) return\n      setLoading(true)\n      \n      query.get().then((documentSnapshots) => {\n         if (documentSnapshots.docs.length < limit) dispatch(setCommentsOver())\n         if (!documentSnapshots.docs.length) return\n         \n         const lastVisible = documentSnapshots.docs[documentSnapshots.docs.length - 1]\n         setQuery(firebase.commentsRef().orderBy('created', \"desc\").limit(limit).startAfter(lastVisible))\n         \n         const loadedComments = documentSnapshots.docs.map((doc) => ({\n            ...doc.data(),\n            docRef: doc.ref,\n            responses: [] as IResponse[],\n            isResponsesOver: false\n         } as IComment))\n         dispatch(addComments(loadedComments))\n         \n         setLoading(false)\n      })\n   }\n   \n\n   useEffect(() => {\n      if (!comments.length) loadComments()\n      //eslint-disable-next-line\n   }, [])\n\n   return {comments, loadComments, isCommentsOver, isLoading: loading}\n}","import emailValidator from 'email-validator';\n\ninterface IForm {\n   username?: string,\n   email?: string,\n   password?: string,\n   passwordOne?: string,\n   passwordTwo?: string\n}\n\n\nexport function checkFormInvalid(form: IForm): boolean {\n   for (let [field, value] of Object.entries(form)) {\n\n      switch (field) {\n         case 'username':\n            if (value.length < 3 || value.length > 15) {\n               return true\n            }\n            break\n\n         case 'email':\n            if (!emailValidator.validate(value)) {\n               return true\n            }\n            break\n            \n         case 'password':\n         case 'passwordOne':\n            if (value.length < 6 || value.length > 25) {\n               return true\n            }\n            break\n\n         case 'passwordTwo':\n            if (value !== form.passwordOne) {\n               return true\n            }\n            break\n      }\n   }\n\n   return false\n}\n\n\n\nexport function getInputClassname(field: Exclude<keyof IForm, 'passwordTwo'>, value: string): string\nexport function getInputClassname(field: 'passwordTwo', value: string, passwordOne: string): string\n\nexport function getInputClassname(field: keyof IForm, value: string, passwordOne?: string): string {\n   let className = 'auth-form__input'\n\n   switch (field) {\n      case 'username':\n         if (value && (value.length < 3 || value.length > 15)) {\n            className += ' auth-form__input_invalid'\n         }\n         break\n\n      case 'email':\n         if (value && !emailValidator.validate(value)) {\n            className += ' auth-form__input_invalid'\n         }\n         break\n         \n      case 'password':\n      case 'passwordOne':\n         if (value && (value.length < 6 || value.length > 25)) {\n            className += ' auth-form__input_invalid'\n         }\n         break\n\n      case 'passwordTwo':\n         if (value && (value !== passwordOne)) {\n            className += ' auth-form__input_invalid'\n         }\n         break\n   }\n\n   return className\n}","import React, { useState, useContext } from 'react'\nimport { useHistory, Link } from 'react-router-dom';\n\nimport { FirebaseContext } from '../../../firebase/FirebaseContext'\nimport * as ROUTES from '../../../constants/routes'\nimport { checkFormInvalid, getInputClassname } from '../validate';\n\n\nexport const SignInPage: React.FC = () => {\n   const history = useHistory()\n   const firebase = useContext(FirebaseContext)\n\n   const [email, setEmail] = useState<string>('')\n   const [password, setPassword] = useState<string>('')\n   const [error, setError] = useState<Error | null>(null)\n\n\n   function handleSubmit(event: React.FormEvent) {\n      event.preventDefault()\n      if (isFormInvalid) return\n\n      firebase\n         .doSignInWithEmailAndPassword(email, password)\n         .then(() => {\n            setEmail('')\n            setPassword('')\n            setError(null)\n\n            history.push(ROUTES.COMMENTS)\n         })\n         .catch(setError)\n   }\n\n\n   const emailClassName = getInputClassname('email', email)\n   const passwordClassName = getInputClassname('password', password)\n   // emailClassName += (email && !validator.validate(email)) ? ' auth-form__input_invalid' : ''\n   // passwordClassName += (password && (password.length < 6 || password.length > 25)) ? ' auth-form__input_invalid' : ''\n\n   const isFormInvalid = checkFormInvalid({ email, password })\n\n\n   return (\n      <div className=\"auth-form-background\">\n         <div className=\"auth-form\">\n            <h2 className=\"auth-form__title\">Sign In</h2>\n\n            <form onSubmit={handleSubmit}>\n               <input\n                  name=\"email\"\n                  className={emailClassName}\n                  value={email}\n                  onChange={(event) => setEmail(event.target.value.replace(/ /g, ''))}\n                  type=\"text\"\n                  placeholder=\"Email Address\"\n               />\n               <input\n                  name=\"password\"\n                  className={passwordClassName}\n                  value={password}\n                  onChange={(event) => setPassword(event.target.value.replace(/ /g, ''))}\n                  type=\"password\"\n                  placeholder=\"Password\"\n               />\n               <button disabled={isFormInvalid} type=\"submit\" className=\"auth-form__input auth-form__button\">\n                  Sign In\n               </button>\n\n               {error && <p className=\"auth-form__error\">{error.message}</p>}\n            </form>\n\n            <p className=\"auth-form__link\">\n               Don't have an account? <Link to={ROUTES.SIGN_UP}>Sign up</Link>\n            </p>\n            <p className=\"auth-form__link\">\n               Forgot password? <Link to={ROUTES.PASSWORD_RESET}>Reset</Link>\n            </p>\n         </div>\n      </div>\n   )\n}","import React from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { useSelector } from 'react-redux'\n\nimport { TAuthUser, IStore } from '../constants/typescript-types'\nimport * as ROUTES from '../constants/routes'\n\n\ntype TCondition = (authUser: TAuthUser) => boolean\n\nexport const withAuthorisation = (condition: TCondition) => (Component: React.FC) => {\n\n   const WithAuthorisation: React.FC = (props) => {\n      const history = useHistory()\n      const authUser = useSelector((store: IStore) => store.authUserStore.authUser)\n      const isConfirm = condition(authUser)\n\n      if (!isConfirm) {\n         history.push(ROUTES.SIGN_IN)\n      }\n\n      return isConfirm ? <Component {...props} /> : null\n   }\n\n   return WithAuthorisation\n}","import React, { useState, useContext } from 'react'\nimport { useHistory, Link } from 'react-router-dom';\n\nimport { FirebaseContext } from '../../../firebase/FirebaseContext'\nimport * as ROUTES from '../../../constants/routes'\nimport { checkFormInvalid, getInputClassname } from '../validate';\n\n\nexport const SignUpPage: React.FC = () => {\n   const history = useHistory()\n   const firebase = useContext(FirebaseContext)\n\n   const [username, setUsername] = useState<string>('')\n   const [email, setEmail] = useState<string>('')\n   const [passwordOne, setPasswordOne] = useState<string>('')\n   const [passwordTwo, setPasswordTwo] = useState<string>('')\n   const [error, setError] = useState<Error | null>(null)\n\n\n   function handleSubmit(event: React.FormEvent) {\n      event.preventDefault()\n      if (isFormInvalid) return\n\n      firebase\n         .doCreateUserWithEmailAndPassword(email, passwordOne)\n         .then((authUser) => {\n            const uid = authUser.user?.uid\n            if (!uid) return\n            \n            firebase\n               .userRef(uid)\n               .set({ username, email })\n         })\n         .then(() => {\n            setUsername('')\n            setEmail('')\n            setPasswordOne('')\n            setPasswordTwo('')\n            setError(null)\n\n            history.push(ROUTES.COMMENTS)\n         })\n         .catch(setError)\n   }\n\n\n   let usernameClassName = getInputClassname('username', username)\n   let emailClassName = getInputClassname('email', email)\n   let passwordOneClassName = getInputClassname('passwordOne', passwordOne)\n   let passwordTwoClassName = getInputClassname('passwordTwo', passwordTwo, passwordOne)\n\n   const isFormInvalid = checkFormInvalid({ username, email, passwordOne, passwordTwo })\n\n\n   return (\n      <div className=\"auth-form-background\">\n         <div className=\"auth-form\">\n            <h2 className=\"auth-form__title\">Sign Up</h2>\n\n            <form onSubmit={handleSubmit}>\n               <input\n                  name=\"username\"\n                  className={usernameClassName}\n                  value={username}\n                  onChange={(event) => setUsername(event.target.value.replace(/ /g, ''))}\n                  type=\"text\"\n                  placeholder=\"Username\"\n               />\n               <input\n                  name=\"email\"\n                  className={emailClassName}\n                  value={email}\n                  onChange={(event) => setEmail(event.target.value.replace(/ /g, ''))}\n                  type=\"text\"\n                  placeholder=\"Email Address\"\n               />\n               <input\n                  name=\"passwordOne\"\n                  className={passwordOneClassName}\n                  value={passwordOne}\n                  onChange={(event) => setPasswordOne(event.target.value.replace(/ /g, ''))}\n                  type=\"password\"\n                  placeholder=\"Password\"\n               />\n               <input\n                  name=\"passwordTwo\"\n                  className={passwordTwoClassName}\n                  value={passwordTwo}\n                  onChange={(event) => setPasswordTwo(event.target.value.replace(/ /g, ''))}\n                  type=\"password\"\n                  placeholder=\"Confirm Password\"\n               />\n               <button disabled={isFormInvalid} type=\"submit\" className=\"auth-form__input auth-form__button\">\n                  Sign Up\n               </button>\n\n               {error && <p className=\"auth-form__error\">{error.message}</p>}\n            </form>\n\n            <p className=\"auth-form__link\">\n               Already have an account? <Link to={ROUTES.SIGN_IN}>Sign in</Link>\n            </p>\n         </div>\n      </div>\n   )\n}","import React, { useState, useContext } from 'react'\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { FirebaseContext } from '../../../firebase/FirebaseContext'\nimport * as ROUTES from '../../../constants/routes'\nimport { checkFormInvalid, getInputClassname } from '../validate';\n\n\nexport const PasswordResetPage: React.FC = () => {\n   const history = useHistory()\n   const firebase = useContext(FirebaseContext)\n   \n\n   const [email, setEmail] = useState<string>('')\n   const [error, setError] = useState<Error | null>(null)\n\n\n   function handleReset(): void {\n      if (isFormInvalid) return\n\n      firebase\n         .doPasswordReset(email)\n         .then(() => {\n            setEmail('')\n            setError(null)\n\n            history.push(ROUTES.SIGN_IN)\n         })\n         .catch(setError)\n   }\n\n\n   let emailClassName = getInputClassname('email', email)\n\n   const isFormInvalid = checkFormInvalid({ email })\n\n\n   return (\n      <div className=\"auth-form-background\">\n         <div className=\"auth-form\">\n            <h2 className=\"auth-form__title\">Reset Password</h2>\n\n            <form onSubmit={handleReset}>\n               <input\n                  name=\"email\"\n                  className={emailClassName}\n                  value={email}\n                  onChange={(event) => setEmail(event.target.value.replace(/ /g, ''))}\n                  type=\"text\"\n                  placeholder=\"Email Address\"\n               />\n               <button disabled={isFormInvalid} type=\"submit\" className=\"auth-form__input auth-form__button\">\n                  Send reset email\n               </button>\n\n               {error && <p className=\"auth-form__error\">{error.message}</p>}\n            </form>\n\n            <p className=\"auth-form__link\">\n               Recall password? <Link to={ROUTES.SIGN_IN}>Sign in</Link>\n            </p>\n         </div>\n      </div>\n   )\n}","import React, { useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport { FirebaseContext } from '../../../firebase/FirebaseContext'\nimport * as ROUTES from '../../../constants/routes'\n\n\nexport const SignOutButton: React.FC = () => {\n   const firebase = useContext(FirebaseContext)\n   const history = useHistory()\n\n   function handleClick() {\n      firebase.doSignOut()\n      history.push(ROUTES.COMMENTS)\n   }\n\n   return (\n      <button onClick={handleClick} className=\"auth-form__input auth-form__button\">\n         Sign Out\n      </button>\n   )\n}","import React, { useState, useContext } from 'react'\nimport { FirebaseContext } from '../../../firebase/FirebaseContext'\nimport { getInputClassname, checkFormInvalid } from '../validate'\n\n\nexport const PasswordUpdateForm: React.FC = () => {\n   const firebase = useContext(FirebaseContext)\n\n   const [passwordOne, setPasswordOne] = useState<string>('')\n   const [passwordTwo, setPasswordTwo] = useState<string>('')\n   const [error, setError] = useState<Error | null>(null)\n\n\n   function handleSubmit(event: React.FormEvent) {\n      event.preventDefault()\n      if (isFormInvalid) return\n\n      firebase\n         .doPasswordUpdate(passwordOne)\n         ?.then(() => {\n            setPasswordOne('')\n            setPasswordTwo('')\n            setError(null)\n         })\n         .catch(setError)\n   }\n\n   let passwordOneClassName = getInputClassname('passwordOne', passwordOne)\n   let passwordTwoClassName = getInputClassname('passwordTwo', passwordTwo, passwordOne)\n\n   const isFormInvalid = checkFormInvalid({ passwordOne, passwordTwo })\n\n\n   return (\n      <form onSubmit={handleSubmit}>\n         <input\n            name=\"passwordOne\"\n            className={passwordOneClassName}\n            value={passwordOne}\n            onChange={(event) => setPasswordOne(event.target.value.replace(/ /g, ''))}\n            type=\"password\"\n            placeholder=\"New Password\"\n         />\n         <input\n            name=\"passwordTwo\"\n            className={passwordTwoClassName}\n            value={passwordTwo}\n            onChange={(event) => setPasswordTwo(event.target.value.replace(/ /g, ''))}\n            type=\"password\"\n            placeholder=\"Confirm Password\"\n         />\n         <button disabled={isFormInvalid} type=\"submit\" className=\"auth-form__input auth-form__button\">\n            Update password\n         </button>\n\n         {error && <p className=\"auth-form__error\">{error.message}</p>}\n      </form>\n   )\n}","import React from 'react'\nimport { useSelector } from 'react-redux'\n\nimport { SignOutButton } from './SignOutButton'\n\nimport { withAuthorisation } from '../../../firebase/withAuthorisation'\nimport { TAuthUser, IStore } from '../../../constants/typescript-types'\nimport { PasswordUpdateForm } from './PasswordUpdateForm'\n\n\nconst AccountPageBase: React.FC = () => {\n   let { authUser, username } = useSelector((store: IStore) => store.authUserStore)\n   if (!username) username = 'Loading ...'\n   const email = authUser?.email\n\n   return (\n      <div className=\"auth-form-background\">\n         <div className=\"auth-form\">\n            <h2 className=\"auth-form__title auth-form__username\">{username}</h2>\n            <h2 className=\"auth-form__title auth-form__email\">{email}</h2>\n            \n            <PasswordUpdateForm />\n            <hr/>\n            <SignOutButton />\n         </div>\n      </div>\n   )\n}\n\nconst condition = (authUser: TAuthUser) => !!authUser\n\nexport const AccountPage = withAuthorisation(condition)(AccountPageBase)","import React from 'react';\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\n\nimport { useAuthentication } from './firebase/useAuthentication';\nimport * as ROUTES from './constants/routes'\n\nimport { NavBar } from './components/NavBar';\nimport { CommentsPage } from './components/pages/comments/CommentsPage';\nimport { SignInPage } from './components/pages/auth/SignInPage';\nimport { SignUpPage } from './components/pages/auth/SignUpPage';\nimport { PasswordResetPage } from './components/pages/auth/PasswordResetPage';\nimport { AccountPage } from './components/pages/account/AccountPage';\n\nimport 'normalize.css'\nimport './styles/style.scss'\n\n\nexport const App: React.FC = () => {\n   useAuthentication()\n   \n   return (\n      <Router basename=\"/comments-system\">\n         <NavBar />\n\n         <Route exact path='/'> <Redirect to={ROUTES.COMMENTS} /> </Route>\n\n         <Route path={ROUTES.COMMENTS} component={CommentsPage} />\n         <Route path={ROUTES.SIGN_IN} component={SignInPage} />\n         <Route path={ROUTES.SIGN_UP} component={SignUpPage} />\n         <Route path={ROUTES.PASSWORD_RESET} component={PasswordResetPage} />\n         <Route path={ROUTES.ACCOUNT} component={AccountPage} />\n      </Router>\n   );\n}","import { useEffect, useContext } from 'react'\nimport { useDispatch } from 'react-redux'\n\nimport { TAuthUser } from '../constants/typescript-types'\nimport { changeAuthUser, setAuthUserUsername } from '../redux/actions'\nimport { FirebaseContext } from './FirebaseContext'\n\nexport function useAuthentication() {\n   const dispatch = useDispatch()\n   const firebase = useContext(FirebaseContext)\n\n   useEffect(() => {\n      const unsubscribe = firebase.auth.onAuthStateChanged((authUser: TAuthUser) => {\n         dispatch(changeAuthUser(authUser))\n         if (!authUser) return\n\n         firebase.userRef(authUser?.uid).get()\n            .then((doc) => {\n               if (!doc.exists) return\n               const username = doc.data()?.username\n               dispatch(setAuthUserUsername(username))\n            })\n      })\n\n      return unsubscribe\n      // eslint-disable-next-line\n   }, [])\n}","import React from 'react';\nimport { render } from 'react-dom';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport { persistStore, persistReducer } from 'redux-persist'\nimport storage from 'redux-persist/lib/storage'\nimport { PersistGate } from 'redux-persist/integration/react'\nimport { composeWithDevTools } from \"redux-devtools-extension\";\n\nimport { rootReducer } from './redux/rootReducer';\n\nimport { App } from './App';\nimport { Firebase, FirebaseContext } from './firebase/FirebaseContext';\n\n\nconst persistConfig = {\n   key: 'root',\n   blacklist: ['commentsStore'],\n   storage,\n}\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\n\nconst store: any = createStore(persistedReducer, composeWithDevTools())\nconst persistor = persistStore(store)\n\n\nrender(\n   <React.StrictMode>\n      <Provider store={store}>\n         <PersistGate loading={null} persistor={persistor}>\n            <FirebaseContext.Provider value={Firebase}>\n               <App />\n            </FirebaseContext.Provider>\n         </PersistGate>\n      </Provider>\n   </React.StrictMode>,\n   document.getElementById('root')\n);"],"sourceRoot":""}