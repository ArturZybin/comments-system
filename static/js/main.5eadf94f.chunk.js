(this["webpackJsonpcomments-system"]=this["webpackJsonpcomments-system"]||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/avatar.511718fc.svg"},24:function(e,t,a){e.exports=a.p+"static/media/comments.d68b6143.svg"},37:function(e,t,a){e.exports=a(56)},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),u=a(17),s=a(8),c=a(9),l=a(27),o=a(32),m=a.n(o),i=a(33),d=a(36),h={user:null,username:null},p=Object(s.b)({authUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_AUTH_USER":return{user:t.payload,username:null};case"SET_AUTH_USER_USERNAME":return Object(d.a)({},e,{username:t.payload});default:return e}}}),f=a(4),_=a(12),b=a(34),E=a(19),v=a.n(E),g=(a(48),a(50),{apiKey:"AIzaSyDpt6WXqe7-GrSdSZxe1w1jD_h9XQIQWYA",authDomain:"comments-system-6e56a.firebaseapp.com",databaseURL:"https://comments-system-6e56a.firebaseio.com",projectId:"comments-system-6e56a",storageBucket:"comments-system-6e56a.appspot.com",messagingSenderId:"463788584226",appId:"1:463788584226:web:d0787997fe53b69d8d497b",measurementId:"G-LMGZ5VEP27"}),O=new function e(){var t=this;Object(b.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.userDB=function(e){return t.db.ref("users/".concat(e))},this.usersDB=function(){return t.db.ref("users")},v.a.initializeApp(g),this.auth=v.a.auth(),this.db=v.a.database()},j=r.a.createContext(O);var N,S=a(23),w=a.n(S),y=a(24),C=a.n(y),U=function(){var e=Object(c.c)((function(e){return e.authUser.user}));return r.a.createElement("nav",{className:"navbar"},e?r.a.createElement(A,null):r.a.createElement(P,null))},A=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/",className:"navbar__comments"},r.a.createElement("img",{className:"navbar__img",src:C.a,alt:"Comments"})),r.a.createElement(f.b,{to:"/account",className:"navbar__account"},r.a.createElement("img",{className:"navbar__img",src:w.a,alt:"Sign In"})))},P=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/",className:"navbar__comments"},r.a.createElement("img",{className:"navbar__img",src:C.a,alt:"Comments"})),r.a.createElement(f.b,{to:"/signin",className:"navbar__account"},r.a.createElement("img",{className:"navbar__img",src:w.a,alt:"Sign In"})))},x=function(){return r.a.createElement("h2",null,"CommentsPage")},I=a(3),k=a(11),R=a.n(k),D=function(){var e=Object(_.e)(),t=Object(n.useContext)(j),a=Object(n.useState)(""),u=Object(I.a)(a,2),s=u[0],c=u[1],l=Object(n.useState)(""),o=Object(I.a)(l,2),m=o[0],i=o[1],d=Object(n.useState)(null),h=Object(I.a)(d,2),p=h[0],b=h[1];var E="auth-form__input",v="auth-form__input";E+=s&&!R.a.validate(s)?" auth-form__input_invalid":"",v+=m&&m.length<6?" auth-form__input_invalid":"";var g=m.length<6||!R.a.validate(s);return r.a.createElement("div",{className:"auth-form-background"},r.a.createElement("div",{className:"auth-form"},r.a.createElement("h2",{className:"auth-form__title"},"Sign In"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),t.doSignInWithEmailAndPassword(s,m).then((function(){c(""),i(""),b(null),e.push("/")})).catch(b)}},r.a.createElement("input",{name:"email",className:E,value:s,onChange:function(e){return c(e.target.value)},type:"text",placeholder:"Email Address"}),r.a.createElement("input",{name:"password",className:v,value:m,onChange:function(e){return i(e.target.value)},type:"password",placeholder:"Password"}),r.a.createElement("button",{disabled:g,type:"submit",className:"auth-form__input auth-form__submit-button"},"Sign In"),p&&r.a.createElement("p",{className:"auth-form__error"},p.message)),r.a.createElement("p",{className:"auth-form__link"},"Don't have an account? ",r.a.createElement(f.b,{to:"/signup"},"Sign up")),r.a.createElement("p",{className:"auth-form__link"},"Forgot password? ",r.a.createElement(f.b,{to:"/password-reset"},"Reset"))))},T=function(){var e=Object(_.e)(),t=Object(n.useContext)(j),a=Object(n.useState)(""),u=Object(I.a)(a,2),s=u[0],c=u[1],l=Object(n.useState)(""),o=Object(I.a)(l,2),m=o[0],i=o[1],d=Object(n.useState)(""),h=Object(I.a)(d,2),p=h[0],b=h[1],E=Object(n.useState)(""),v=Object(I.a)(E,2),g=v[0],O=v[1],N=Object(n.useState)(null),S=Object(I.a)(N,2),w=S[0],y=S[1];var C="auth-form__input",U="auth-form__input",A="auth-form__input",P="auth-form__input";C+=s&&s.length<3?" auth-form__input_invalid":"",U+=m&&!R.a.validate(m)?" auth-form__input_invalid":"",A+=p&&p.length<6?" auth-form__input_invalid":"",P+=g&&g!==p?" auth-form__input_invalid":"";var x=p!==g||p.length<6||!R.a.validate(m)||""===s;return r.a.createElement("div",{className:"auth-form-background"},r.a.createElement("div",{className:"auth-form"},r.a.createElement("h2",{className:"auth-form__title"},"Sign Up"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),t.doCreateUserWithEmailAndPassword(m,p).then((function(e){var a;t.userDB(null===(a=e.user)||void 0===a?void 0:a.uid).set({username:s,email:m})})).then((function(){c(""),i(""),b(""),O(""),y(null),e.push("/")})).catch(y)}},r.a.createElement("input",{name:"username",className:C,value:s,onChange:function(e){return c(e.target.value)},type:"text",placeholder:"Username"}),r.a.createElement("input",{name:"email",className:U,value:m,onChange:function(e){return i(e.target.value)},type:"text",placeholder:"Email Address"}),r.a.createElement("input",{name:"passwordOne",className:A,value:p,onChange:function(e){return b(e.target.value)},type:"password",placeholder:"Password"}),r.a.createElement("input",{name:"passwordTwo",className:P,value:g,onChange:function(e){return O(e.target.value)},type:"password",placeholder:"Confirm Password"}),r.a.createElement("button",{disabled:x,type:"submit",className:"auth-form__input auth-form__submit-button"},"Sign Up"),w&&r.a.createElement("p",{className:"auth-form__error"},w.message)),r.a.createElement("p",{className:"auth-form__link"},"Already have an account? ",r.a.createElement(f.b,{to:"/signin"},"Sign in"))))},W=function(){var e=Object(_.e)(),t=Object(n.useContext)(j),a=Object(n.useState)(""),u=Object(I.a)(a,2),s=u[0],c=u[1],l=Object(n.useState)(null),o=Object(I.a)(l,2),m=o[0],i=o[1];var d="auth-form__input";d+=s&&!R.a.validate(s)?" auth-form__input_invalid":"";var h=!R.a.validate(s);return r.a.createElement("div",{className:"auth-form-background"},r.a.createElement("div",{className:"auth-form"},r.a.createElement("h2",{className:"auth-form__title"},"Reset Password"),r.a.createElement("form",{onSubmit:function(){t.doPasswordReset(s).then((function(){c(""),i(null),e.push("/signin")})).catch(i)}},r.a.createElement("input",{name:"email",className:d,value:s,onChange:function(e){return c(e.target.value)},type:"text",placeholder:"Email Address"}),r.a.createElement("button",{disabled:h,type:"submit",className:"auth-form__input auth-form__submit-button"},"Send reset email"),m&&r.a.createElement("p",{className:"auth-form__error"},m.message)),r.a.createElement("p",{className:"auth-form__link"},"Recall password? ",r.a.createElement(f.b,{to:"/signin"},"Sign in"))))},B=function(){var e=Object(n.useContext)(j),t=Object(_.e)();return r.a.createElement("button",{onClick:function(){e.doSignOut(),t.push("/")},className:"auth-form__input auth-form__submit-button"},"Sign Out")},H=function(){var e=Object(n.useContext)(j),t=Object(n.useState)(""),a=Object(I.a)(t,2),u=a[0],s=a[1],c=Object(n.useState)(""),l=Object(I.a)(c,2),o=l[0],m=l[1],i=Object(n.useState)(null),d=Object(I.a)(i,2),h=d[0],p=d[1];var f="auth-form__input",_="auth-form__input";f+=u&&u.length<6?" auth-form__input_invalid":"",_+=o&&o!==u?" auth-form__input_invalid":"";var b=u!==o||u.length<6;return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.doPasswordUpdate(u).then((function(){s(""),m(""),p(null)})).catch(p)}},r.a.createElement("input",{name:"passwordOne",className:f,value:u,onChange:function(e){return s(e.target.value)},type:"password",placeholder:"New Password"}),r.a.createElement("input",{name:"passwordTwo",className:_,value:o,onChange:function(e){return m(e.target.value)},type:"password",placeholder:"Confirm Password"}),r.a.createElement("button",{disabled:b,type:"submit",className:"auth-form__input auth-form__submit-button"},"Update password"),h&&r.a.createElement("p",{className:"auth-form__error"},h.message))},G=(N=function(e){return!!e},function(e){return function(t){var a=Object(_.e)(),n=Object(c.c)((function(e){return e.authUser.user})),u=N(n);return u||a.push("/signin"),u?r.a.createElement(e,t):null}})((function(){var e=Object(c.c)((function(e){return e.authUser})),t=e.user,a=e.username;a||(a="Loading ...");var n=null===t||void 0===t?void 0:t.email;return r.a.createElement("div",{className:"auth-form-background"},r.a.createElement("div",{className:"auth-form"},r.a.createElement("h2",{className:"auth-form__title auth-form__username"},a),r.a.createElement("h2",{className:"auth-form__title auth-form__email"},n),r.a.createElement(H,null),r.a.createElement("hr",null),r.a.createElement(B,null)))})),M=(a(54),a(55),function(){return function(){var e=Object(c.b)(),t=Object(n.useContext)(j);Object(n.useEffect)((function(){return t.auth.onAuthStateChanged((function(a){e({type:"CHANGE_AUTH_USER",payload:a}),t.userDB(null===a||void 0===a?void 0:a.uid).once("value").then((function(t){if(t.val()){var a=t.val().username;e(function(e){return{type:"SET_AUTH_USER_USERNAME",payload:e}}(a))}}))}))}),[])}(),r.a.createElement(f.a,null,r.a.createElement(U,null),r.a.createElement(_.a,{exact:!0,path:"/",component:x}),r.a.createElement(_.a,{path:"/signin",component:D}),r.a.createElement(_.a,{path:"/signup",component:T}),r.a.createElement(_.a,{path:"/password-reset",component:W}),r.a.createElement(_.a,{path:"/account",component:G}))}),F={key:"root",storage:m.a},L=Object(l.a)(F,p),z=Object(s.c)(L),J=Object(l.b)(z);Object(u.render)(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{store:z},r.a.createElement(i.a,{loading:null,persistor:J},r.a.createElement(j.Provider,{value:O},r.a.createElement(M,null))))),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.5eadf94f.chunk.js.map